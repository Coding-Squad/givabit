<!DOCTYPE html>
<html>
<head>
  <title>action_test.html</title>
  <script src="../lib/misc/closure-library/closure/goog/base.js"></script>
  <script type="text/javascript">
    goog.require('goog.style');
    goog.require('goog.testing.jsunit');
  </script>
  <style type="text/css">
    .slider-container {
      width: 200px;
      height: 60px;
    }

    .slider-track {
      background: blue;
      width: 200px;
      height: 4px;
      position: relative;
      top: 28px;
    }

    .slider-dragger {
      border: 2px solid yellow;
      z-index: 2;
      height: 100%;
      width: 0px;
      z-index: 2;
      left: 0px;
      position: relative;
    }
  </style>
</head>
<body>
  <br /><br />
  <div class="slider-container">
    <div class="slider-track"></div>
    <div class="slider-dragger"></div>
  </div>
  <script type="text/javascript">
    var mouseClicked = false;
    document.documentElement.onmousedown = function() { mouseClicked = true; };
    document.documentElement.onmouseup = function() { mouseClicked = false; };

    function Slider(root) {
      var sliderDragger = root.getElementsByClassName('slider-dragger')[0];
      var parentLeft = goog.style.getPageOffsetLeft(root);
      var maxRight = parseInt(goog.style.getComputedStyle(root, 'width'));

      this.move = function(e) {
        if (mouseClicked) {
          var currentLeft = goog.style.getComputedStyle(sliderDragger, 'left');
          var currentLeftPx = parseInt(currentLeft);
          var setting = e.screenX - parentLeft;
          if (setting >= 0 && setting < maxRight) {
            sliderDragger.style.left = setting + 'px';
          }
        }
      }

      this.init = function() {
        root.addEventListener('mousedown', this.move, false);
        root.addEventListener('mousemove', this.move, false);
      }
    }

    var sliderDragger = document.getElementsByClassName('slider-container')[0];
    new Slider(sliderDragger).init();
    function testPasses() {
    }

    function testFails() {
      assertTrue(false);
    }
  </script>
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
</body>
</html>
