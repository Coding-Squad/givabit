<!DOCTYPE html>
<html>
<head>
  <title>action_test.html</title>
  <script src="../lib/misc/closure-library/closure/goog/base.js"></script>
  <script type="text/javascript">
    goog.require('goog.testing.jsunit');
  </script>
  <style type="text/css">
    .slider-container {
      width: 200px;
      height: 60px;
      left: 200px;
      position: absolute;
    }

    .slider-track {
      background: blue;
      width: 200px;
      height: 4px;
      position: relative;
      top: 28px;
    }

    .slider-dragger {
      border: 2px solid yellow;
      z-index: 2;
      height: 100%;
      width: 0px;
      z-index: 2;
      left: 0px;
      position: relative;
    }
  </style>
</head>
<body>
  <br /><br />
  <div class="slider-container">
    <div class="slider-track"></div>
    <div class="slider-dragger"></div>
  </div>
  <script type="text/javascript">
    var mouseClicked = false;
    document.documentElement.onmousedown = function() { mouseClicked = true; };
    document.documentElement.onmouseup = function() { mouseClicked = false; };

    getEffectiveStyle = function(element, property) {
      var doc = element.ownerDocument;
      if (doc.defaultView && doc.defaultView.getComputedStyle) {
        var styles = doc.defaultView.getComputedStyle(element, null);
        if (styles) {
          return styles[property] || styles.getPropertyValue(property) || '';
        }
      }

      return '';
    };

    function Slider(root) {
      var sliderDragger = root.getElementsByClassName('slider-dragger')[0];
      var parentLeft = parseInt(getEffectiveStyle(root, 'left'));
      var maxRight = parseInt(getEffectiveStyle(root, 'width'));

      this.move = function(e) {
        if (mouseClicked) {
          var currentLeft = getEffectiveStyle(sliderDragger, 'left');
          var currentLeftPx = parseInt(currentLeft);
          var setting = e.screenX - parentLeft;
          if (setting >= 0 && setting < maxRight) {
            sliderDragger.style.left = setting + 'px';
          }
        }
      }

      this.init = function() {
        root.addEventListener('mousedown', this.move, false);
        root.addEventListener('mousemove', this.move, false);
      }
    }

    var sliderDragger = document.getElementsByClassName('slider-container')[0];
    new Slider(sliderDragger).init();
    function testPasses() {
    }

    function testFails() {
      assertTrue(false);
    }
  </script>
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
</body>
</html>
